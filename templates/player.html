<!doctype html>

<title>Tempus map recommendations</title>
<meta charset=utf-8>

<head>
    <style type="text/css">
        h1 {
            margin-top: 0;
            margin-bottom: 0;
        }

        #heading {
            margin-bottom: 1rem;
        }

        .error {
            color: red;
        }

        #class-id {
            margin-left: 1.5rem;
            width: 6rem;
        }

        #player-id {
            margin-left: 0.1rem;
            width: 6rem;
        }

        button {
            min-width: 5rem;
            min-height: 2.5rem;
            cursor: pointer;
            margin-left: 3.9rem;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
    </style>
</head>

<div id="heading">
    <h1>Tempus map recommendations</h1>
    <span>Database date {{date}} (yyyy-mm-dd)</span><br />
    <span>You can find your player id by looking up your profile on tempus, e.g. <a target="_blank"
            rel="noreferrer noopener"
            href="https://tempus2.xyz/players/68414">https://tempus2.xyz/players/68414</a></span><br />
    <span><a href="{{to_index}}">&lt;-- Back to index</a></span>
</div>

<span>Player id</span>
<input id="player-id" type="number" value="{{player_id}}" />

<br />

<span>Class</span>
<select id="class-id">
    <option value="3">Soldier</option>
    <option value="4">Demoman</option>
</select>

<br />

<button id="submit">Hit me</button>

<div id="result">
    {% for err in errors %}
    <span class="error">{{err}}</span><br />
    {% endfor %}
    {% for rec in recommendations %}
    <span>{{rec["name"]}} - {{rec["value"]}}</span><br />
    {% endfor %}
</div>

<script>
    document.querySelector('#submit').addEventListener('click', (event) => {
        event.preventDefault();
        var playerId = document.querySelector('#player-id').value;
        var classId = document.querySelector('#class-id').value;
        window.location.pathname = `/player/${playerId}/${classId}`;
    });

    document.querySelector('#class-id').value = "{{class_id}}";
</script>